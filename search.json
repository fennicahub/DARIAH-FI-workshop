[
  {
    "objectID": "workshop.html#workshop-overview",
    "href": "workshop.html#workshop-overview",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Workshop overview",
    "text": "Workshop overview\n\nWhat is Finna (incl.¬†Fennica & Viola)\nWhy use R for cultural metadata\nThe finna R package\nCase study 1: Fennica\nCase study 2: Viola\nEnrichment with Finto / KANTO\nMultinomial regression on enriched Fennica\nPractical exercises (+ solutions)\nQuestions\n\n\nExamples and exercises are based on the finna package vignettes: - Introduction to finna - Fennica in Finna - Viola in Finna - Fennica Authors in Kanto"
  },
  {
    "objectID": "workshop.html#what-is-finna",
    "href": "workshop.html#what-is-finna",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "What is Finna?",
    "text": "What is Finna?\n\nFinnish national search service for museums, libraries, and archives\nMaintained by the National Library of Finland + partner institutions\nProvides open interfaces for search and reuse\n\nKey idea: Finna is an aggregation layer, not a single database."
  },
  {
    "objectID": "workshop.html#fennica-and-viola-inside-finna",
    "href": "workshop.html#fennica-and-viola-inside-finna",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Fennica and Viola inside Finna",
    "text": "Fennica and Viola inside Finna\n\nFennica: Finnish National Bibliography (books/publications; long historical coverage)\nViola: national discography and sheet music bibliography (recordings, scores, music archives)"
  },
  {
    "objectID": "workshop.html#why-use-r",
    "href": "workshop.html#why-use-r",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Why use R?",
    "text": "Why use R?\n\nReproducible workflows: retrieval ‚Üí cleaning ‚Üí analysis ‚Üí visualization\nScales beyond manual browsing\nBridges cultural metadata to:\n\nstatistics\nML\ntext analysis\nenrichment via authority data"
  },
  {
    "objectID": "workshop.html#the-finna-r-package",
    "href": "workshop.html#the-finna-r-package",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "The finna R package",
    "text": "The finna R package\n\nCore entry point: search_finna()\nBulk retrieval patterns (limits, batching)\nTidy outputs (tibbles) ‚Üí easy dplyr + ggplot2"
  },
  {
    "objectID": "workshop.html#setup-install",
    "href": "workshop.html#setup-install",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Setup (install)",
    "text": "Setup (install)\n\noptions(repos = c(CRAN = \"https://cloud.r-project.org\"))\n\ninstall.packages(c(\"remotes\", \"tidyverse\", \"ggplot2\"))\n\nremotes::install_github(\"fennicahub/finna\")\nremotes::install_github(\"fennicahub/finto\")"
  },
  {
    "objectID": "workshop.html#setup-load",
    "href": "workshop.html#setup-load",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Setup (load)",
    "text": "Setup (load)\n\nlibrary(finna)\nlibrary(finto)\nlibrary(tidyverse)\nlibrary(ggplot2)"
  },
  {
    "objectID": "workshop.html#case-study-1-fennica",
    "href": "workshop.html#case-study-1-fennica",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Case study 1: Fennica",
    "text": "Case study 1: Fennica\nBasic Fennica search\n\nfennica &lt;- search_finna(\n  \"*\",\n  filters = c('collection:\"FEN\"')\n)\n\nfennica %&gt;% slice_head(n = 10)"
  },
  {
    "objectID": "workshop.html#case-study-2-viola-official-vignette",
    "href": "workshop.html#case-study-2-viola-official-vignette",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "üéº Case study 2: Viola (official vignette)",
    "text": "üéº Case study 2: Viola (official vignette)\nüîπ Batch retrieval across centuries\n\nviola_results &lt;- fetch_viola_records(\n  base_query = \"*\",\n  base_filters = c('collection:\"VIO\"'),\n  year_ranges = list(\n    c(0, 1699),\n    c(1700, 1799),\n    c(1800, 1899)\n  ),\n  include_na = TRUE,\n  limit_per_query = 100000,\n  total_limit = 500,\n  delay_after_query = 3\n)\n\nnrow(viola_results)\nviola_results %&gt;% slice_head(n = 6)"
  },
  {
    "objectID": "workshop.html#finna-collection-overview-archives-example",
    "href": "workshop.html#finna-collection-overview-archives-example",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "üóÇÔ∏è Finna collection overview (archives example)",
    "text": "üóÇÔ∏è Finna collection overview (archives example)\n\ncollection_overview &lt;- fetch_finna(\n  query = \"record_format:ead\",\n  limit = 0,\n  facets = \"building\",\n  lng = \"fi\",\n  prettyPrint = TRUE\n)\n\ncollection_overview"
  },
  {
    "objectID": "workshop.html#harvest-metadata-from-an-oai-pmh-server",
    "href": "workshop.html#harvest-metadata-from-an-oai-pmh-server",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "üóÇÔ∏è Harvest Metadata from an OAI-PMH Server",
    "text": "üóÇÔ∏è Harvest Metadata from an OAI-PMH Server\n\nrecords_marc21 &lt;- harvest_oai_pmh(\n  base_url = \"https://api.finna.fi/OAI/Server\",\n  metadata_prefix = \"marc21\",\n  user_agent = \"MyCustomHarvester/1.0\",\n  record_limit = 1000\n)"
  },
  {
    "objectID": "workshop.html#enrichment-fennica-authors-kanto",
    "href": "workshop.html#enrichment-fennica-authors-kanto",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Enrichment: Fennica authors ‚Üí KANTO",
    "text": "Enrichment: Fennica authors ‚Üí KANTO\n\nlibrary(finto)\nlibrary(stringr)\nlibrary(dplyr)\n\ndata(\"fennica_subset\", package = \"finna\")\n\nauthors_df &lt;- finto::get_kanto(fennica_subset)\n\nfennica_subset2 &lt;- fennica_subset %&gt;%\nmutate(authorID = str_extract(author_ID, \"\\d{9}\"))\n\nauthors_df_clean &lt;- authors_df %&gt;% \n  distinct(author_ID, .keep_all = TRUE) %&gt;% \n  rename(authorID = author_ID)\n\nmerged_data &lt;- left_join(\n  fennica_subset2,\n  authors_df_clean,\n  by = \"authorID\"\n)\n\nmerged_data %&gt;% slice_head(n = 5)"
  },
  {
    "objectID": "workshop.html#setup-install-1",
    "href": "workshop.html#setup-install-1",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Setup (install)",
    "text": "Setup (install)\n\npkgs &lt;- c(\"tidyr\", \"dplyr\", \"forcats\", \"nnet\", \"stringr\",\"ggplot2\")\n\nto_install &lt;- pkgs[!pkgs %in% rownames(installed.packages())]\nif (length(to_install) &gt; 0) {\n  install.packages(to_install, repos = \"https://cloud.r-project.org\")\n}\n\ninvisible(lapply(pkgs, library, character.only = TRUE))"
  },
  {
    "objectID": "workshop.html#load-the-data",
    "href": "workshop.html#load-the-data",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Load the data",
    "text": "Load the data\n\nurl &lt;- \"https://a3s.fi/swift/v1/AUTH_3c0ccb602fa24298a6fe3ae224ca022f/fennica-container/harmonized/workshop_dariah.tsv\"\n\ndf_model &lt;- read.table(\n  file = url,\n  sep = \"\\t\",\n  header = TRUE,\n  colClasses = \"character\",\n  fileEncoding = \"UTF-8\",\n  quote = \"\\\"\",\n  comment.char = \"\",\n  stringsAsFactors = FALSE\n)\n\n# Choose a common reference level (baseline) for interpretation\ndf_model$genre &lt;- fct_relevel(df_model$genre, \"Romaanit\")"
  },
  {
    "objectID": "workshop.html#quick-sanity-checks",
    "href": "workshop.html#quick-sanity-checks",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Quick sanity checks",
    "text": "Quick sanity checks\n\ntable(df_model$genre) %&gt;% sort(decreasing = TRUE) %&gt;% head(10)\n\n\n    Tietokirjallisuus              Romaanit                 Runot \n                14652                  5336                  3002 \nNovellit, kertomukset                Draama            Yhdistelm√§ \n                 1908                  1715                   276 \n    Kaunokirjallisuus     Puheet, esitelm√§t \n                  263                   229 \n\ntable(df_model$gender)\n\n\n female    male Unknown \n   2143   21287    3951 \n\ntable(df_model$profession_primary) %&gt;% sort(decreasing = TRUE) %&gt;% head(10)\n\n\n     Unknown        Other   kirjailija respondentti     k√§√§nt√§j√§   toimittaja \n       11030         5318         2413         2281         2261          880 \n  professori     opettaja  kirjoittaja      rehtori \n         814          787          714          460"
  },
  {
    "objectID": "workshop.html#plot-1-genre-composition-by-gender-proportions",
    "href": "workshop.html#plot-1-genre-composition-by-gender-proportions",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Plot 1: Genre composition by gender (proportions)",
    "text": "Plot 1: Genre composition by gender (proportions)\n\nggplot(df_model, aes(x = gender, fill = genre)) +\ngeom_bar(position = \"fill\") +\nlabs(x = \"Gender\", y = \"Proportion\", fill = \"Genre\") +\ntheme_minimal()"
  },
  {
    "objectID": "workshop.html#plot-2-genre-composition-by-profession-proportions",
    "href": "workshop.html#plot-2-genre-composition-by-profession-proportions",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Plot 2: Genre composition by profession (proportions)",
    "text": "Plot 2: Genre composition by profession (proportions)\n\nggplot(df_model, aes(x = profession_primary, fill = genre)) +\ngeom_bar(position = \"fill\") +\nlabs(x = \"\", y = \"Proportion\", fill = \"Genre\") +\ntheme_minimal() +\ntheme(axis.text.x = element_text(angle = 50, vjust = 0.5, hjust = 1))"
  },
  {
    "objectID": "workshop.html#multinomial-regression",
    "href": "workshop.html#multinomial-regression",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Multinomial regression",
    "text": "Multinomial regression\n\nmodel &lt;- multinom(\n  genre ~ gender + profession_primary,\n  data = df_model,\n  trace = FALSE\n)\n\nsummary(model)\n\nCall:\nmultinom(formula = genre ~ gender + profession_primary, data = df_model, \n    trace = FALSE)\n\nCoefficients:\n                      (Intercept)  gendermale genderUnknown\nDraama                 -1.8243281  0.48425545     0.1714273\nKaunokirjallisuus      -3.3856521  0.02641162     1.0587280\nNovellit, kertomukset  -0.8062308 -0.26404611     0.5445759\nPuheet, esitelm√§t      -4.6867499  0.75068731     0.1995744\nRunot                  -2.4859831  0.99940256     2.3762132\nTietokirjallisuus      -1.4358849  1.30221822     1.8288469\nYhdistelm√§             -3.6842853  0.17945458     1.7669436\n                      profession_primarykirjailija\nDraama                                  0.04681887\nKaunokirjallisuus                      -0.16985840\nNovellit, kertomukset                  -0.19087778\nPuheet, esitelm√§t                      -0.72349059\nRunot                                   0.17508161\nTietokirjallisuus                      -0.82330625\nYhdistelm√§                             -0.12057560\n                      profession_primarykirjoittaja profession_primarykuvittaja\nDraama                                   -0.3716476                 -1.51862826\nKaunokirjallisuus                         2.3993149                 -0.24109521\nNovellit, kertomukset                     1.3345576                  0.71805513\nPuheet, esitelm√§t                         2.0457859                 -0.24699555\nRunot                                     2.5447221                  0.07848643\nTietokirjallisuus                         2.9248295                 -0.43434645\nYhdistelm√§                                2.6939746                  2.23956433\n                      profession_primaryopettaja profession_primaryOther\nDraama                                 1.2608868              1.34599257\nKaunokirjallisuus                      1.5794176              0.68723728\nNovellit, kertomukset                  0.5652738              0.01392671\nPuheet, esitelm√§t                      1.3594645              2.04404504\nRunot                                  3.4845860              1.74389986\nTietokirjallisuus                      1.6570524              2.13285118\nYhdistelm√§                             0.6248211              0.37178627\n                      profession_primaryprofessori profession_primaryrehtori\nDraama                                    1.743904               -0.13817991\nKaunokirjallisuus                         1.638005               -0.41709494\nNovellit, kertomukset                     1.033936               -0.05902285\nPuheet, esitelm√§t                         4.923200                0.14617129\nRunot                                     3.339814                0.27443012\nTietokirjallisuus                         4.947652               -0.37683755\nYhdistelm√§                                2.414373                1.43085769\n                      profession_primaryrespondentti\nDraama                                     0.6175326\nKaunokirjallisuus                         -0.6254910\nNovellit, kertomukset                     -1.1796540\nPuheet, esitelm√§t                          0.5462942\nRunot                                      6.2565483\nTietokirjallisuus                         10.1538133\nYhdistelm√§                                 0.4946164\n                      profession_primarytoimittaja profession_primaryUnknown\nDraama                                   1.2537584               -0.01493913\nKaunokirjallisuus                        1.2711562                0.04804269\nNovellit, kertomukset                    0.8058559               -0.38969916\nPuheet, esitelm√§t                        0.2702575                0.97441631\nRunot                                    1.9311286                0.34802361\nTietokirjallisuus                        1.1261798                1.03670876\nYhdistelm√§                               1.9779348               -0.39957036\n\nStd. Errors:\n                      (Intercept) gendermale genderUnknown\nDraama                 0.10912012 0.08883404    0.14270491\nKaunokirjallisuus      0.24177562 0.18946770    0.24328932\nNovellit, kertomukset  0.08650150 0.07138198    0.10593058\nPuheet, esitelm√§t      0.35367304 0.26546358    0.36743602\nRunot                  0.11993771 0.09479875    0.11444010\nTietokirjallisuus      0.07896528 0.06488203    0.08069092\nYhdistelm√§             0.26302595 0.20292697    0.26873432\n                      profession_primarykirjailija\nDraama                                  0.10288901\nKaunokirjallisuus                       0.25748123\nNovellit, kertomukset                   0.09076228\nPuheet, esitelm√§t                       0.42285126\nRunot                                   0.10917163\nTietokirjallisuus                       0.08142748\nYhdistelm√§                              0.27620628\n                      profession_primarykirjoittaja profession_primarykuvittaja\nDraama                                    0.4551472                   0.3735389\nKaunokirjallisuus                         0.3756909                   0.5335691\nNovellit, kertomukset                     0.2359878                   0.1416478\nPuheet, esitelm√§t                         0.5540525                   0.7531100\nRunot                                     0.2183049                   0.2109636\nTietokirjallisuus                         0.1856609                   0.1533788\nYhdistelm√§                                0.3700779                   0.2665901\n                      profession_primaryopettaja profession_primaryOther\nDraama                                 0.2057370              0.10069325\nKaunokirjallisuus                      0.3867514              0.25625036\nNovellit, kertomukset                  0.2159991              0.10944311\nPuheet, esitelm√§t                      0.5764924              0.29056345\nRunot                                  0.1625823              0.10327487\nTietokirjallisuus                      0.1549123              0.07144812\nYhdistelm√§                             0.5996751              0.29736302\n                      profession_primaryprofessori profession_primaryrehtori\nDraama                                   0.5278332                 0.1919932\nKaunokirjallisuus                        1.0516618                 0.5384245\nNovellit, kertomukset                    0.5769589                 0.1669830\nPuheet, esitelm√§t                        0.5411295                 0.5718669\nRunot                                    0.4421894                 0.1787756\nTietokirjallisuus                        0.4080617                 0.1343134\nYhdistelm√§                               0.8304904                 0.3041265\n                      profession_primaryrespondentti\nDraama                                      5.505767\nKaunokirjallisuus                          23.293044\nNovellit, kertomukset                      10.192345\nPuheet, esitelm√§t                          17.428738\nRunot                                       3.161731\nTietokirjallisuus                           3.147812\nYhdistelm√§                                 14.523978\n                      profession_primarytoimittaja profession_primaryUnknown\nDraama                                   0.1515957                0.09413559\nKaunokirjallisuus                        0.3239207                0.22286312\nNovellit, kertomukset                    0.1478171                0.08435518\nPuheet, esitelm√§t                        0.6410573                0.28371971\nRunot                                    0.1428368                0.09666364\nTietokirjallisuus                        0.1184175                0.06004265\nYhdistelm√§                               0.2900095                0.25538190\n\nResidual Deviance: 66109.7 \nAIC: 66291.7"
  },
  {
    "objectID": "workshop.html#predicted-probabilities-for-each-row-n-x-k",
    "href": "workshop.html#predicted-probabilities-for-each-row-n-x-k",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Predicted probabilities for each row (N x K)",
    "text": "Predicted probabilities for each row (N x K)\n\np_hat &lt;- fitted(model)\nhead(p_hat, 10)\n\n    Romaanit     Draama Kaunokirjallisuus Novellit, kertomukset\n1  0.2280022 0.05881185       0.008315801            0.05295165\n2  0.2280022 0.05881185       0.008315801            0.05295165\n3  0.0885456 0.08907133       0.006119708            0.03078931\n4  0.2280022 0.05881185       0.008315801            0.05295165\n5  0.2280022 0.05881185       0.008315801            0.05295165\n6  0.2280022 0.05881185       0.008315801            0.05295165\n7  0.2280022 0.05881185       0.008315801            0.05295165\n8  0.2280022 0.05881185       0.008315801            0.05295165\n9  0.4392490 0.12051962       0.012883758            0.12445096\n10 0.4392490 0.12051962       0.012883758            0.12445096\n   Puheet, esitelm√§t      Runot Tietokirjallisuus  Yhdistelm√§\n1        0.011795392 0.07302474         0.5625035 0.004594933\n2        0.011795392 0.07302474         0.5625035 0.004594933\n3        0.013349783 0.11453002         0.6537350 0.003859251\n4        0.011795392 0.07302474         0.5625035 0.004594933\n5        0.011795392 0.07302474         0.5625035 0.004594933\n6        0.011795392 0.07302474         0.5625035 0.004594933\n7        0.011795392 0.07302474         0.5625035 0.004594933\n8        0.011795392 0.07302474         0.5625035 0.004594933\n9        0.004159992 0.11834067         0.1686952 0.011700833\n10       0.004159992 0.11834067         0.1686952 0.011700833\n\nnrow(p_hat)\n\n[1] 27381"
  },
  {
    "objectID": "workshop.html#average-predicted-probabilities-by-gender",
    "href": "workshop.html#average-predicted-probabilities-by-gender",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Average predicted probabilities by gender",
    "text": "Average predicted probabilities by gender\n\navg_probs_by_gender &lt;- as.data.frame(p_hat) %&gt;%\nmutate(gender = df_model$gender) %&gt;%\ngroup_by(gender) %&gt;%\nsummarise(across(everything(), mean, na.rm = TRUE), .groups = \"drop\") %&gt;%\npivot_longer(-gender, names_to = \"genre\", values_to = \"p\")\n\nggplot(avg_probs_by_gender, aes(x = gender, y = p, fill = genre)) +\ngeom_col(position = \"fill\") +\nlabs(x = \"Gender\", y = \"Average predicted probability\", fill = \"Genre\") +\ntheme_minimal()"
  },
  {
    "objectID": "workshop.html#exercise-1-fennica-time-window-trend",
    "href": "workshop.html#exercise-1-fennica-time-window-trend",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Exercise 1 (Fennica): time window trend",
    "text": "Exercise 1 (Fennica): time window trend\nTask\n\nRetrieve Fennica records for 1900‚Äì1950 (sample is fine)\nPlot publications per year"
  },
  {
    "objectID": "workshop.html#exercise-1-solution",
    "href": "workshop.html#exercise-1-solution",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Exercise 1 ‚Äî Solution",
    "text": "Exercise 1 ‚Äî Solution\n\nfen_1900_1950 &lt;- search_finna(\n  query = \"*\",\n  filters = c(\n    'collection:\"FEN\"',\n    'search_daterange_mv:\"overlap|[1900 TO 1950]\"'\n  ),\n  limit = 500\n)\n\nfen_1900_1950 %&gt;%\n  mutate(Year = suppressWarnings(as.integer(Year))) %&gt;%\n  filter(!is.na(Year)) %&gt;%\n  count(Year) %&gt;%\n  ggplot(aes(Year, n)) +\n  geom_line() +\n  labs(\n    title = \"Fennica publications per year (1900‚Äì1950 sample)\",\n    x = \"Year\",\n    y = \"Count\"\n  )"
  },
  {
    "objectID": "workshop.html#exercise-2-fennica-compare-two-languages-or-formats",
    "href": "workshop.html#exercise-2-fennica-compare-two-languages-or-formats",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Exercise 2 (Fennica): compare two languages or formats",
    "text": "Exercise 2 (Fennica): compare two languages or formats\nTask\n\nFrom your Fennica sample, pick two values of Language (or Formats)\nCompare counts over time (facet or color)"
  },
  {
    "objectID": "workshop.html#exercise-2-solution",
    "href": "workshop.html#exercise-2-solution",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Exercise 2 ‚Äî Solution",
    "text": "Exercise 2 ‚Äî Solution\n\nfen &lt;- fen_1900_1950 %&gt;%\n  mutate(\n    Year = suppressWarnings(as.integer(Year)),\n    Language = as.character(Language)\n  ) %&gt;%\n  filter(!is.na(Year), !is.na(Language))\n\ntop_lang &lt;- fen %&gt;%\n  count(Language, sort = TRUE) %&gt;%\n  slice_head(n = 2) %&gt;%\n  pull(Language)\n\nfen %&gt;%\n  filter(Language %in% top_lang) %&gt;%\n  count(Year, Language) %&gt;%\n  ggplot(aes(Year, n, color = Language)) +\n  geom_line() +\n  labs(\n    title = \"Two most common languages over time (sample)\",\n    x = \"Year\",\n    y = \"Count\"\n  )"
  },
  {
    "objectID": "workshop.html#exercise-3-viola-top-10-authors-and-share",
    "href": "workshop.html#exercise-3-viola-top-10-authors-and-share",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Exercise 3 (Viola): top-10 authors and share",
    "text": "Exercise 3 (Viola): top-10 authors and share\nTask\n\nUse fetch_viola_records() for a small time window (e.g., 1900‚Äì1949)\nPlot top-10 authors with percentages"
  },
  {
    "objectID": "workshop.html#exercise-3-solution",
    "href": "workshop.html#exercise-3-solution",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Exercise 3 ‚Äî Solution",
    "text": "Exercise 3 ‚Äî Solution\n\nviola_1900_1949 &lt;- fetch_viola_records(\n  base_query = \"*\",\n  base_filters = c('collection:\"VIO\"'),\n  year_ranges = list(c(1900, 1949)),\n  include_na = FALSE,\n  limit_per_query = 100000,\n  total_limit = 500,\n  delay_after_query = 1\n)\n\nref_v &lt;- refine_metadata(viola_1900_1949)\n\ntop_plot(ref_v$Author, field = \"Author\", ntop = 10, show.percentage = TRUE) +\n  xlab(\"Author\") +\n  ylab(\"Percentage\")"
  },
  {
    "objectID": "workshop.html#exercise-4-enrichment-join-kanto-and-inspect-new-fields",
    "href": "workshop.html#exercise-4-enrichment-join-kanto-and-inspect-new-fields",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Exercise 4 (Enrichment): join KANTO and inspect new fields",
    "text": "Exercise 4 (Enrichment): join KANTO and inspect new fields\nTask\n\nLoad fennica_subset (built-in demo dataset)\nFetch KANTO author data with get_kanto()\nJoin back and list 5 enriched columns you didn‚Äôt have before"
  },
  {
    "objectID": "workshop.html#exercise-4-solution",
    "href": "workshop.html#exercise-4-solution",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Exercise 4 ‚Äî Solution",
    "text": "Exercise 4 ‚Äî Solution\n\ndata(\"fennica_subset\", package = \"finna\")\n\nauthors_df &lt;- finto::get_kanto(fennica_subset)\n\nfennica_subset2 &lt;- fennica_subset %&gt;%\n  mutate(authorID = stringr::str_extract(author_ID, \"\\\\d{9}\"))\n\nauthors_df_clean &lt;- authors_df %&gt;%\n  distinct(author_ID, .keep_all = TRUE) %&gt;%\n  rename(authorID = author_ID)\n\njoined &lt;- left_join(fennica_subset2, authors_df_clean, by = \"authorID\")\n\nadded_cols &lt;- setdiff(names(joined), names(fennica_subset2))\nadded_cols %&gt;% head(20)\n\n# Example: show a few enriched fields if present\njoined %&gt;% select(any_of(c(\"author_name\", \"authorID\", \"uri\", \"type\")), any_of(added_cols)) %&gt;%\n  slice_head(n = 3)"
  },
  {
    "objectID": "workshop.html#take-home-message",
    "href": "workshop.html#take-home-message",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Take-home message",
    "text": "Take-home message\n\nFinna metadata is research-ready in R\nfinna enables scalable, reproducible cultural analytics\nEnrichment + stats unlock new research questions\n\nQuestions?"
  },
  {
    "objectID": "workshop.html#troubleshooting",
    "href": "workshop.html#troubleshooting",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Troubleshooting",
    "text": "Troubleshooting\n\nAPI limits: Use limit parameter and batching\nRate limiting: Add delay_per_query parameter\nMissing data: Use filter(!is.na(field))\nDate parsing: Use suppressWarnings(as.integer(Year))"
  },
  {
    "objectID": "workshop.html#cheat-sheet",
    "href": "workshop.html#cheat-sheet",
    "title": "Retrieving and Analyzing Finnish Cultural Metadata with R",
    "section": "Cheat sheet",
    "text": "Cheat sheet\n# Basic search\nsearch_finna(query, filters, limit)\n\n# Fennica specific\nsearch_finna(\"*\", filters = c('collection:\"FEN\"'))\n\n# Viola specific\nsearch_finna(\"*\", filters = c('collection:\"VIO\"'))\n\n# Viola batching\nfetch_viola_records(base_query, year_ranges)\n\n# Metadata harvest\nharvest_oai_pmh(\n  base_url,\n  metadata_prefix,\n  user_agent = \"FinnaHarvester/1.0\",\n  record_limit = NULL\n)\n\n# Enrichment\nfinto::get_kanto(data)"
  }
]